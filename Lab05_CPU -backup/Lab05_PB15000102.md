# Lab05 单周期CPU设计

> PB15000102 王嵩超

要求：

涉及到两个ram，一个regfile，现在均要求是异步读，同步写。

故读写的时间约束不一样。应用双端口。这样就有clka和clkb。读端口clka连至addra，写端口clkb连至clk。

## 设计要点

- 异步读取模式。理想情况是：读取过程不受clk控制。即当addr变化之后，新的数据将在一定延时之后出现在输出端口。
  - 对于RegFile，实现异步读取只需要将always块写为always@(addr, negedge rst_n)即可。

    由于是同步写入。当前周期对RegFile的写入操作要在下一周期开始时才真正写入寄存器。这不影响下一周期的执行。

  - 对于I-MEM（指令寄存器），由于本实验未要求在运行时更改指令，其写使能可一直设为0。且在每条指令取指前的每个clk上升沿时刻，PC内容已经更新好，故不需要使用异步读取。

  - 而对于MEM，由于它们是由Block Memory Generator例化而来，很难直接实现addr变化后的立即响应。故本实验中，我将MEM的定时方式设为clk的下降沿。即在上半周期，准备好地址和各控制信号；下半周期MEM被触发执行。

    lw、sw指令在下半周期即可完成写入。